<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>perfil</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  </head>
<body class="bg-light d-flex flex-column min-vh-100">

  <!-- =================== MENU SUPERIOR =================== -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-custom px-3">
    <a class="navbar-brand" >
      <img src="../IMG/logotr.png" alt="Logo JR Espetos" class="logo-menu">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="telainicial.html">Início</a></li>
        <li class="nav-item"><a class="nav-link active" href="carrinho.html">Carrinho</a></li>
      </ul>
    </div>
  </nav>
<!-- =================== CONTEÚDO PRINCIPAL =================== -->
<main class="container my-4 flex-grow-1">
  <div class="card shadow-sm p- <!-- Avatar --">
<div class="text-center mb-4">
  <div class="position-relative d-inline-block">

    <!-- Imagem do usuário -->
  <img id="avatarPreview" 
     src="../php/upload_avatar.php" 
     class="rounded-circle" width="100" height="100">


    <!-- Botão de upload -->
    <form id="avatarForm" method="POST" action="../PHP/upload_avatar.php" enctype="multipart/form-data">
      <input type="file" name="avatar" id="avatarInput" accept="image/*" style="display:none">
      <button type="button" 
              class="btn btn-sm btn-dark position-absolute bottom-0 end-0 rounded-circle" 
              style="width:30px; height:30px; font-weight:bold; font-size:18px; padding:0;"
              onclick="document.getElementById('avatarInput').click()">
        +
      </button>
    </form>
  </div>
  <p class="mt-2 mb-0 fw-semibold">Usuário</p>
</div>

<script>
  const input = document.getElementById('avatarInput');
  const preview = document.getElementById('avatarPreview');
  const form = document.getElementById('avatarForm');

  input.addEventListener('change', function() {
    if (input.files && input.files[0]) {
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result; // preview da imagem
      }
      reader.readAsDataURL(input.files[0]);
      form.submit(); // envia automaticamente
    }
  });
</script>



      <!-- Formulário principal -->
      <form>
        <div class="mb-3">
          <label for="nome" class="form-label fw-bold">Nome:</label>
          <input type="text" id="nome" class="form-control" value="João da Silva">
        </div>

        <div class="mb-3">
          <label for="email" class="form-label fw-bold">E-mail:</label>
          <input type="email" id="email" class="form-control" value="joao@email.com">
        </div>

        <div class="mb-3">
          <label for="senha" class="form-label fw-bold">Senha:</label>
          <div class="input-group">
            <input type="password" id="senha" class="form-control" value="12345678" disabled>
            <button class="btn btn-outline-secondary" type="button" id="toggleSenha">
              <i class="bi bi-eye"></i>
            </button>
          </div>
          <a href="#" class="mudar-senha">Mudar senha</a>
        </div>

        <!-- Botões de opções -->
        <div class="d-grid gap-2 mt-4">
          <button type="button" class="btn btn-option">Dados para cadastro de frete</button>
          <button type="button" class="btn btn-option">Meus pedidos</button>
          <button type="button" class="btn btn-option" id="btnEnderecos">Meus endereços</button>
        </div>
      </form>

      <!-- ============ SEÇÃO DE ENDEREÇOS (ESCONDIDA POR PADRÃO) ============ -->
      <div id="secaoEnderecos" class="mt-4" style="display: none;">
        <h5 class="mb-3">Endereços cadastrados</h5>

        <!-- Lista de endereços cadastrados -->
        <div id="listaEnderecos" class="mb-4">
          <!-- Exemplo fixo, depois você puxa do banco -->
          <div class="border rounded p-3 mb-2">
            <strong>Residencial:</strong> Rua das Flores, 123 - Centro, São Paulo/SP<br>
            CEP: 01000-000
          </div>
        </div>

        <hr>

        <!-- Formulário de novo endereço -->
        <h6 class="fw-bold mb-3">Cadastrar novo endereço</h6>
        <form id="formEndereco">
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">CEP</label>
              <input type="text" class="form-control" name="cep" placeholder="00000-000">
            </div>
            <div class="col-md-8">
              <label class="form-label">Logradouro</label>
              <input type="text" class="form-control" name="logradouro" placeholder="Rua/Avenida">
            </div>
            <div class="col-md-4">
              <label class="form-label">Bairro</label>
              <input type="text" class="form-control" name="bairro">
            </div>
            <div class="col-md-4">
              <label class="form-label">Cidade</label>
              <input type="text" class="form-control" name="cidade">
            </div>
            <div class="col-md-4">
              <label class="form-label">Estado</label>
              <input type="text" class="form-control" name="estado">
            </div>
            <div class="col-md-3">
              <label class="form-label">Número</label>
              <input type="text" class="form-control" name="numero">
            </div>
            <div class="col-md-5">
              <label class="form-label">Complemento</label>
              <input type="text" class="form-control" name="complemento">
            </div>
            <div class="col-md-4">
              <label class="form-label">Tipo</label>
              <select class="form-select" name="tipo">
                <option value="Residencial">Residencial</option>
                <option value="Comercial">Comercial</option>
                <option value="Outro">Outro</option>
              </select>
            </div>
          </div>

          <div class="text-end mt-3">
            <button type="submit" class="btn btn-success px-4">Salvar Endereço</button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <!-- =================== RODAPÉ =================== -->
  <footer class="footer bg-custom text-white text-center py-2 mt-auto">
    <small>&copy; 2025 JR Espetos - Todos os direitos reservados</small>
  </footer>

  <!-- =================== SCRIPTS =================== -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Mostrar/ocultar senha
    const toggleSenha = document.getElementById("toggleSenha");
    const senhaInput = document.getElementById("senha");
    toggleSenha.addEventListener("click", () => {
      if (senhaInput.type === "password") {
        senhaInput.type = "text";
        toggleSenha.innerHTML = '<i class="bi bi-eye-slash"></i>';
      } else {
        senhaInput.type = "password";
        toggleSenha.innerHTML = '<i class="bi bi-eye"></i>';
      }
    });

    // Mostrar/esconder seção de endereços
    const btnEnderecos = document.getElementById("btnEnderecos");
    const secaoEnderecos = document.getElementById("secaoEnderecos");
    btnEnderecos.addEventListener("click", () => {
      secaoEnderecos.style.display =
        secaoEnderecos.style.display === "none" ? "block" : "none";
    });

    // Simulação de envio do formulário (HTML puro)
    const formEndereco = document.getElementById("formEndereco");
    formEndereco.addEventListener("submit", (e) => {
      e.preventDefault();
      alert("Endereço cadastrado com sucesso! (aqui depois entra o PHP)");
      formEndereco.reset();
    });
  </script>
</body>
</html>